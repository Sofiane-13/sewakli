# -----------------------------------------------
# !!! THIS FILE WAS GENERATED BY TYPE-GRAPHQL !!!
# !!!   DO NOT MODIFY THIS FILE BY YOURSELF   !!!
# -----------------------------------------------

"""Response returned after successful email verification"""
type AuthResponse {
  """JWT access token"""
  accessToken: String!

  """User email address"""
  email: String!

  """Token expiration time in seconds"""
  expiresIn: Int!
}

input CreateIntermediateStopInput {
  city: String!
  country: String!
  date: DateTimeISO!
}

input CreateRouteInput {
  arrivalCity: String!
  arrivalCountry: String!
  arrivalDate: DateTimeISO!
  departureCity: String!
  departureCountry: String!
  departureDate: DateTimeISO!
  description: String
  intermediateStops: [CreateIntermediateStopInput!]
  price: Float
  transporterId: String
}

type CurrentUser {
  email: String!
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.This scalar is serialized to a string in ISO 8601 format and parsed from a string in ISO 8601 format.
"""
scalar DateTimeISO

type IntermediateStopDto {
  city: String!
  country: String!
  date: DateTimeISO!
  id: String!
}

type Mutation {
  addUser(familyName: String!, firstName: String!): UserGraphQl!
  cancelRoute(id: String!): RouteDto!
  completeRoute(id: String!): RouteDto!
  createRoute(input: CreateRouteInput!): RouteDto!

  """Déconnexion - supprime le cookie auth"""
  logout: Boolean!
  publishRoute(id: String!): RouteDto!

  """Envoie un code de vérification par email"""
  sendEmailCode(email: String!): Boolean!

  """Vérifie le code email et retourne un token JWT dans un cookie"""
  verifyEmailCode(code: String!, email: String!): AuthResponse!
}

type Query {
  """Get current authenticated user from cookie"""
  getCurrentUser: CurrentUser
  route(id: String!): RouteDto
  routes: [RouteDto!]!
  routesByTransporter: [RouteDto!]!
  searchRoutes(input: SearchRouteInput!): [RouteDto!]!
  users: [UserGraphQl!]!
}

type RouteDto {
  arrivalCity: String!
  arrivalCountry: String!
  arrivalDate: DateTimeISO!
  createdAt: DateTimeISO!
  departureCity: String!
  departureCountry: String!
  departureDate: DateTimeISO!
  description: String
  id: String!
  intermediateStops: [IntermediateStopDto!]!
  price: Float
  status: RouteStatus!
  transporterId: String!
  updatedAt: DateTimeISO!
}

"""The status of a route"""
enum RouteStatus {
  CANCELLED
  COMPLETED
  CREATED
  PUBLISHED
}

input SearchRouteInput {
  arrivalCity: String
  arrivalCountry: String
  arrivalDate: DateTimeISO
  departureCity: String
  departureCountry: String
  departureDate: DateTimeISO
  status: RouteStatus
}

type UserGraphQl {
  familyName: String!
  firstName: String!
  id: ID!
}